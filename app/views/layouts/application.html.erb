<!DOCTYPE html>
<html>
  <head>
    <title>PacificOnlineOrder</title>
    <%= csrf_meta_tags %>
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.css">
    <%= javascript_include_tag 'application' %>

  </head>

  <body>
	<nav class="navbar navbar-toggleable-md navbar-light bg-faded navbar-right fixed-top">
		<a class="navbar-brand" href="#"><%= image_tag('logo.png')%></a>
		<div class="collapse navbar-collapse" id="navbarNavDropdown">
			<ul class="navbar-nav">
				<li class="nav-item active">
					<%= link_to "Home", root_path, :class => "nav-link", "data-role" => "page" %>
				</li>
				<% if current_user %>
					<li class="nav-item">
						<%= link_to "Order", order_page_path, :class => "nav-link" %>
					</li>
					<li class="nav-item">
						<%= link_to "Cart", order_page_path, :class => "nav-link" %>
					</li>
					<li class="nav-item">
						<%= link_to "#{current_user.full_name}'s Account", order_page_path, :class => "nav-link", "data-toggle" => "modal", "data-target" => "#userUpdate" %>
					</li>
					<li class="nav-item">
						<%= link_to "Log out", logout_path, :class => "nav-link" %>
					</li>
				<% else %>
					<li class="nav-item">
						<%= link_to "Sign in/up", new_user_path, :class => "nav-link" %>
					</li>
				<% end %>
			</ul>
		</div>
	</nav>

	<div class="modal fade" id="userUpdate" tabindex="-1" role="dialog" aria-labelledby="userUpdateTitle" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title title" id="userUpdateTitle"><%= current_user.full_name %>'s account</h5>
			
				</div>
				<div class="modal-body">
					<div class="col-sm-12">
						<form method="post" action="/users/:id">
							<input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
							<input type="hidden" name="_method" value="patch">
							<input type="hidden" name="user_update[user_id]" value="<%= current_user.id %>">
							<div class="form-group row">
								<div class="col-sm-4">
									<label> Full Name:</label>
								</div>
								<div class="col-sm-8">
									<input type="text" class="form-control" name="user_update[full_name]" placeholder="<%= current_user.full_name %>">
								</div>
							</div>

							<div class="form-group row">
								<div class="col-sm-4">
									<label> Email:</label>
								</div>
								<div class="col-sm-8">
									<input type="email" name="user_update[email]" class="form-control" placeholder="<%= current_user.email %>">
								</div>
							</div>

							<div class="form-group row">
								<div class="col-sm-4">
									<label> Phone number:</label>
								</div>
								<div class="col-sm-8">
									<input type="integer" name="user_update[phone]" class="form-control" placeholder="<%= current_user.phone %>">
								</div>
							</div>

							<div class="form-group row">
								<div class="col-sm-4">
									<label> Password:</label>
								</div>
								<div class="col-sm-8">
									<input type="password" name="user_update[password]" class="form-control" placeholder="<%= current_user.password %>">
								</div>
							</div>

							<div class="form-group row">
								<div class="col-sm-4">
									<label> Password confirmation:</label>
								</div>
								<div class="col-sm-8">
									<input type="password" name="user_update[password_confirmation]" class="form-control" placeholder="<%= current_user.password %>">
								
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
								<input type="submit" name="" class="btn-primary btn" value="Save changes">
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>


    <%= yield %>

	<div id="footer">
		<div class="col-sm-12 text-center">
			<p class="title">
				Pacific Lighthouse 
				<br> Copyright 2017
				All Rights Reserved
			</p>
		</div>
	</div>

	<div id="subfooter">
		<div class="col-sm-12 text-right">
			Powered by Amplyfii
		</div>
	</div>


  </body>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.js"></script>
	<script type="text/javascript">

	</script>
</html>
